"use strict";var e=require("./helpers-h_CsJnT0.cjs"),r=require("react"),t=require("@react-input/core");var a=function(e){return function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return new e("".concat(t.join("\n\n"),"\n"))}};module.exports=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=n.mask,i=void 0===l?"":l,o=n.replacement,c=void 0===o?{}:o,p=n.showMask,s=void 0!==p&&p,u=n.separate,d=void 0!==u&&u,v=n.track,h=n.modify,f=n.onMask,m="string"==typeof c?e.formatToReplacementObject(c):c,k=r.useRef(null);return t.useInput({init:function(e){var r=e.controlled,t=e.initialValue;t=r||t?t:s?i:"","production"!==process.env.NODE_ENV&&function(e){var r=e.initialValue,t=e.mask,n=e.replacement;r.length>t.length&&console.error(a(Error)("The initialized value of the `value` or `defaultValue` property is longer than the value specified in the `mask` property. Check the correctness of the initialized value in the specified property.",'Invalid value: "'.concat(r,'".')));var l=Object.keys(n).filter((function(e){return e.length>1}));l.length>0&&console.error(a(Error)("Object keys in the `replacement` property are longer than one character. Replacement keys must be one character long. Check the correctness of the value in the specified property.","Invalid keys: ".concat(l.join(", "),".")));for(var i=t.slice(0,r.length),o=-1,c=0;c<i.length;c++){var p=Object.prototype.hasOwnProperty.call(n,i[c]);if(!(i[c]===r[c]||p&&n[i[c]].test(r[c]))){o=c;break}}-1!==o&&console.error(a(Error)("An invalid character was found in the initialized property value `value` or `defaultValue` (index: ".concat(o,"). Check the correctness of the initialized value in the specified property."),'Invalid value: "'.concat(r,'".')))}({initialValue:t,mask:i,replacement:m});var n={mask:i,replacement:m,showMask:s,separate:d};return k.current={value:t,props:n,fallbackProps:n},{value:t}},tracking:function(r){var a,n=r.inputType,l=r.previousValue,o=r.addedValue,c=r.changeStart,p=r.changeEnd;if(null===k.current)throw new t.SyntheticChangeError("The state has not been initialized.");k.current.value!==l?k.current.props=k.current.fallbackProps:k.current.fallbackProps=k.current.props;var u=null==v?void 0:v(e._objectSpread2(e._objectSpread2({},"insert"===n?{inputType:n,data:o}:{inputType:n,data:null}),{},{value:l,selectionStart:c,selectionEnd:p}));if(!1===u)throw new t.SyntheticChangeError("Custom trekking stop.");null===u?o="":!0!==u&&void 0!==u&&(o=u);var f=e.unformat$1(l,{end:c,mask:k.current.props.mask,replacement:k.current.props.replacement,separate:k.current.props.separate}),g=e.unformat$1(l,{start:p,mask:k.current.props.mask,replacement:k.current.props.replacement,separate:k.current.props.separate}),y=RegExp("[^".concat(Object.keys(m).join(""),"]"),"g"),w=i.replace(y,"");if(f&&(f=e.filter(f,{replacementChars:w,replacement:m,separate:d})),o&&(o=e.filter(o,{replacementChars:w.slice(f.length),replacement:m,separate:!1})),"insert"===n&&""===o)throw new t.SyntheticChangeError("The character does not match the key value of the `replacement` object.");if(d){var b=i.slice(c,p).replace(y,""),j=b.length-o.length;j<0?g=g.slice(-j):j>0&&(g=b.slice(-j)+g)}g&&(g=e.filter(g,{replacementChars:w.slice(f.length+o.length),replacement:m,separate:d}));var E=f+o+g,V=null!==(a=null==h?void 0:h(E))&&void 0!==a?a:{},C=V.mask,T=void 0===C?i:C,O=V.replacement,x=void 0===O?m:O,M=V.showMask,P=void 0===M?s:M,S=V.separate,R=void 0===S?d:S;"string"==typeof x&&(x=e.formatToReplacementObject(x));var z=function(r,t){var a=t.mask,n=t.replacement,l=t.showMask,i=e.format$1(r,{mask:a,replacement:n,showMask:l}),o=e.formatToParts$1(i,{mask:a,replacement:n}),c=e.generatePattern({mask:a,replacement:n}),p=e.generatePattern({mask:a,replacement:n},!0);return{value:i,input:r,parts:o,pattern:c,isValid:RegExp(p).test(i)}}(E,{mask:T,replacement:x,showMask:P}),I=function(e){var r,t,a,n=e.inputType,l=e.value,i=e.addedValue,o=e.beforeChangeValue,c=e.parts,p=e.replacement,s=e.separate,u=c.filter((function(e){var r=e.type;return"input"===r||s&&"replacement"===r})),d=null===(r=u[o.length+i.length-1])||void 0===r?void 0:r.index,v=null===(t=u[o.length-1])||void 0===t?void 0:t.index,h=null===(a=u[o.length+i.length])||void 0===a?void 0:a.index;if("insert"===n){if(void 0!==d)return d+1;if(void 0!==h)return h;if(void 0!==v)return v+1}if("deleteForward"===n){if(void 0!==h)return h;if(void 0!==v)return v+1}if("deleteBackward"===n){if(void 0!==v)return v+1;if(void 0!==h)return h}var f=l.split("").findIndex((function(e){return Object.prototype.hasOwnProperty.call(p,e)}));return-1!==f?f:l.length}({inputType:n,value:z.value,addedValue:o,beforeChangeValue:f,parts:z.parts,replacement:x,separate:R});return k.current.value=z.value,k.current.props={mask:T,replacement:x,showMask:P,separate:R},{value:z.value,selectionStart:I,selectionEnd:I,__detail:z}},eventType:"input-mask",eventHandler:f})};
