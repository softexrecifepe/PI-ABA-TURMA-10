import{c as e,d as r,g as t,e as a,h as n,i as l,j as i}from"./helpers-CW9cD2Tf.js";import{useRef as o}from"react";import{useInput as s,SyntheticChangeError as c}from"@react-input/core";var p=function(e){return function(){for(var r=arguments.length,t=new Array(r),a=0;a<r;a++)t[a]=arguments[a];return new e("".concat(t.join("\n\n"),"\n"))}};function u(){var u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=u.mask,v=void 0===d?"":d,h=u.replacement,m=void 0===h?{}:h,f=u.showMask,k=void 0!==f&&f,g=u.separate,y=void 0!==g&&g,w=u.track,b=u.modify,V=u.onMask,j="string"==typeof m?a(m):m,E=o(null);return s({init:function(e){var r=e.controlled,t=e.initialValue;t=r||t?t:k?v:"","production"!==process.env.NODE_ENV&&function(e){var r=e.initialValue,t=e.mask,a=e.replacement;r.length>t.length&&console.error(p(Error)("The initialized value of the `value` or `defaultValue` property is longer than the value specified in the `mask` property. Check the correctness of the initialized value in the specified property.",'Invalid value: "'.concat(r,'".')));var n=Object.keys(a).filter((function(e){return e.length>1}));n.length>0&&console.error(p(Error)("Object keys in the `replacement` property are longer than one character. Replacement keys must be one character long. Check the correctness of the value in the specified property.","Invalid keys: ".concat(n.join(", "),".")));for(var l=t.slice(0,r.length),i=-1,o=0;o<l.length;o++){var s=Object.prototype.hasOwnProperty.call(a,l[o]);if(!(l[o]===r[o]||s&&a[l[o]].test(r[o]))){i=o;break}}-1!==i&&console.error(p(Error)("An invalid character was found in the initialized property value `value` or `defaultValue` (index: ".concat(i,"). Check the correctness of the initialized value in the specified property."),'Invalid value: "'.concat(r,'".')))}({initialValue:t,mask:v,replacement:j});var a={mask:v,replacement:j,showMask:k,separate:y};return E.current={value:t,props:a,fallbackProps:a},{value:t}},tracking:function(o){var s,p=o.inputType,u=o.previousValue,d=o.addedValue,h=o.changeStart,m=o.changeEnd;if(null===E.current)throw new c("The state has not been initialized.");E.current.value!==u?E.current.props=E.current.fallbackProps:E.current.fallbackProps=E.current.props;var f=null==w?void 0:w(n(n({},"insert"===p?{inputType:p,data:d}:{inputType:p,data:null}),{},{value:u,selectionStart:h,selectionEnd:m}));if(!1===f)throw new c("Custom trekking stop.");null===f?d="":!0!==f&&void 0!==f&&(d=f);var g=l(u,{end:h,mask:E.current.props.mask,replacement:E.current.props.replacement,separate:E.current.props.separate}),V=l(u,{start:m,mask:E.current.props.mask,replacement:E.current.props.replacement,separate:E.current.props.separate}),C=RegExp("[^".concat(Object.keys(j).join(""),"]"),"g"),T=v.replace(C,"");if(g&&(g=i(g,{replacementChars:T,replacement:j,separate:y})),d&&(d=i(d,{replacementChars:T.slice(g.length),replacement:j,separate:!1})),"insert"===p&&""===d)throw new c("The character does not match the key value of the `replacement` object.");if(y){var x=v.slice(h,m).replace(C,""),M=x.length-d.length;M<0?V=V.slice(-M):M>0&&(V=x.slice(-M)+V)}V&&(V=i(V,{replacementChars:T.slice(g.length+d.length),replacement:j,separate:y}));var O=g+d+V,z=null!==(s=null==b?void 0:b(O))&&void 0!==s?s:{},P=z.mask,I=void 0===P?v:P,R=z.replacement,S=void 0===R?j:R,_=z.showMask,A=void 0===_?k:_,N=z.separate,B=void 0===N?y:N;"string"==typeof S&&(S=a(S));var D=function(a,n){var l=n.mask,i=n.replacement,o=n.showMask,s=e(a,{mask:l,replacement:i,showMask:o}),c=r(s,{mask:l,replacement:i}),p=t({mask:l,replacement:i}),u=t({mask:l,replacement:i},!0);return{value:s,input:a,parts:c,pattern:p,isValid:RegExp(u).test(s)}}(O,{mask:I,replacement:S,showMask:A}),F=function(e){var r,t,a,n=e.inputType,l=e.value,i=e.addedValue,o=e.beforeChangeValue,s=e.parts,c=e.replacement,p=e.separate,u=s.filter((function(e){var r=e.type;return"input"===r||p&&"replacement"===r})),d=null===(r=u[o.length+i.length-1])||void 0===r?void 0:r.index,v=null===(t=u[o.length-1])||void 0===t?void 0:t.index,h=null===(a=u[o.length+i.length])||void 0===a?void 0:a.index;if("insert"===n){if(void 0!==d)return d+1;if(void 0!==h)return h;if(void 0!==v)return v+1}if("deleteForward"===n){if(void 0!==h)return h;if(void 0!==v)return v+1}if("deleteBackward"===n){if(void 0!==v)return v+1;if(void 0!==h)return h}var m=l.split("").findIndex((function(e){return Object.prototype.hasOwnProperty.call(c,e)}));return-1!==m?m:l.length}({inputType:p,value:D.value,addedValue:d,beforeChangeValue:g,parts:D.parts,replacement:S,separate:B});return E.current.value=D.value,E.current.props={mask:I,replacement:S,showMask:A,separate:B},{value:D.value,selectionStart:F,selectionEnd:F,__detail:D}},eventType:"input-mask",eventHandler:V})}export{u as default};
